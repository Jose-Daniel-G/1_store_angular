import{a as d}from"./chunk-LP3ZXZHP.js";import"./chunk-EK5HOP4N.js";import{d as R,j as T,k as j,l as P,m as D,o as S,p as b,q as U,r as N}from"./chunk-LM5SF62Y.js";import{Aa as p,Ba as f,Ma as v,P as c,Pa as g,Ra as e,Sa as i,Ta as n,U as E,V as w,Z as u,Za as k,ab as r,bb as I,eb as h,rb as L}from"./chunk-TIETC33F.js";var x=class t{constructor(){}toggleSidebar(){let o=document.body;o.classList.contains("sidebar-open")?(o.classList.remove("sidebar-open"),o.classList.add("sidebar-collapse")):(o.classList.remove("sidebar-collapse"),o.classList.add("sidebar-open"))}static \u0275fac=function(a){return new(a||t)};static \u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})};function K(t,o){t&1&&(e(0,"a",65),n(1,"i",66),e(2,"p"),r(3," Configuraciones "),n(4,"i",67),i()())}function J(t,o){t&1&&(e(0,"a",68),n(1,"i",69),e(2,"p"),r(3,"Permisos"),i()())}function V(t,o){t&1&&(e(0,"a",70),n(1,"i",71),e(2,"p"),r(3,"Roles"),i()())}var A=class t{constructor(o,a,l){this.authService=o;this.adminLte=a;this.router=l;this.user=this.authService.getCurrentUser()}user=null;ngAfterViewInit(){document.querySelector('[data-lte-toggle="sidebar"]')?.addEventListener("click",a=>{a.preventDefault(),this.adminLte.toggleSidebar()}),document.querySelectorAll(".nav-item.has-treeview > a").forEach(a=>{a.addEventListener("click",l=>{l.preventDefault(),a.closest(".nav-item.has-treeview")?.classList.toggle("menu-open")})})}logout(){this.authService.logout().subscribe({next:()=>{this.router.navigate(["/login"])},error:o=>{console.error("Error durante el logout:",o),localStorage.removeItem("user"),localStorage.removeItem("access_token"),this.router.navigate(["/login"])}})}static \u0275fac=function(a){return new(a||t)(f(d),f(x),f(b))};static \u0275cmp=u({type:t,selectors:[["app-layout"]],standalone:!0,features:[h],decls:128,vars:4,consts:[[1,"layout-fixed","sidebar-expand-lg","bg-body-tertiary"],[1,"app-wrapper"],[1,"app-header","navbar","navbar-expand","bg-body"],[1,"container-fluid"],[1,"navbar-nav"],[1,"nav-item"],["data-lte-toggle","sidebar","href","#","role","button",1,"nav-link"],[1,"bi","bi-list"],[1,"navbar-nav","ms-auto"],[1,"nav-item","dropdown"],[1,"dropdown-menu","dropdown-menu-lg","dropdown-menu-end"],["href","#",1,"dropdown-item"],[1,"d-flex"],[1,"flex-shrink-0"],["src","../../dist/img/user1-128x128.jpg","alt","User Avatar",1,"img-size-50","rounded-circle","me-3"],[1,"flex-grow-1"],[1,"dropdown-item-title"],[1,"float-end","fs-7","text-danger"],[1,"bi","bi-star-fill"],[1,"fs-7"],[1,"fs-7","text-secondary"],[1,"bi","bi-clock-fill","me-1"],[1,"dropdown-divider"],["src","../../dist/img/user8-128x128.jpg","alt","User Avatar",1,"img-size-50","rounded-circle","me-3"],[1,"float-end","fs-7","text-secondary"],["src","../../dist/img/user3-128x128.jpg","alt","User Avatar",1,"img-size-50","rounded-circle","me-3"],[1,"float-end","fs-7","text-warning"],["href","#",1,"dropdown-item","dropdown-footer"],[1,"nav-item","dropdown","user-menu"],["href","#","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle"],["src","../../dist/img/user2-160x160.jpg","alt","User Image",1,"user-image","rounded-circle","shadow"],[1,"d-none","d-md-inline"],[1,"user-header","text-bg-primary"],["src","../../dist/img/user2-160x160.jpg","alt","User Image",1,"rounded-circle","shadow"],[1,"user-footer"],["href","#",1,"btn","btn-default","btn-flat"],[1,"fa","fa-fw","fa-user","text-lightblue"],[1,"btn","btn-default","btn-flat","float-end",3,"click"],[1,"fa","fa-fw","fa-power-off","text-red"],["data-bs-theme","dark",1,"app-sidebar","bg-body-tertiary","shadow"],[1,"sidebar-brand"],[1,"brand-link"],["src","assets/images/jd_cellphone.png","alt","AdminLTE Logo",1,"brand-image","opacity-75","shadow","rounded-circle","w-10","h-10"],[1,"brand-text","fw-light"],[1,"sidebar-wrapper"],[1,"mt-2"],["data-lte-toggle","treeview","role","menu","data-accordion","false",1,"nav","bg-body-tertiary","sidebar-menu","flex-column"],["routerLink","/dashboard",1,"nav-link","active"],[1,"nav-icon","fas","fa-home"],["routerLink","/procesar",1,"nav-link"],[1,"fa-solid","fa-spinner"],["routerLink","/procesar/en-proceso",1,"nav-link"],[1,"fa-solid","fa-receipt"],[1,"fa-solid","fa-clipboard-check"],[1,"nav-item","has-treeview"],["class","nav-link",4,"ngIf"],[1,"nav","nav-treeview"],["href","/procesar/create",1,"nav-link"],[1,"fas","fa-users","fa-fw","nav-icon"],["href","/permissions/create","class","nav-link",4,"ngIf"],["routerLink","/roles","class","nav-link",4,"ngIf"],[1,"app-main"],[1,"app-footer"],[1,"float-end","d-none","d-sm-inline"],["href","https://adminlte.io",1,"text-decoration-none"],[1,"nav-link"],[1,"nav-icon","fa-solid","fa-gears"],[1,"right","fas","fa-angle-left"],["href","/permissions/create",1,"nav-link"],[1,"fas","fa-key","fa-fw","nav-icon"],["routerLink","/roles",1,"nav-link"],[1,"fa-solid","fa-address-book","nav-icon"]],template:function(a,l){a&1&&(e(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),n(7,"i",7),i()()(),e(8,"ul",8)(9,"li",9)(10,"div",10)(11,"a",11)(12,"div",12)(13,"div",13),n(14,"img",14),i(),e(15,"div",15)(16,"h3",16),r(17," Brad Diesel "),e(18,"span",17),n(19,"i",18),i()(),e(20,"p",19),r(21,"Call me whenever you can..."),i(),e(22,"p",20),n(23,"i",21),r(24," 4 Hours Ago "),i()()()(),n(25,"div",22),e(26,"a",11)(27,"div",12)(28,"div",13),n(29,"img",23),i(),e(30,"div",15)(31,"h3",16),r(32," John Pierce "),e(33,"span",24),n(34,"i",18),i()(),e(35,"p",19),r(36,"I got your message bro"),i(),e(37,"p",20),n(38,"i",21),r(39," 4 Hours Ago "),i()()()(),n(40,"div",22),e(41,"a",11)(42,"div",12)(43,"div",13),n(44,"img",25),i(),e(45,"div",15)(46,"h3",16),r(47," Nora Silvester "),e(48,"span",26),n(49,"i",18),i()(),e(50,"p",19),r(51,"The subject goes here"),i(),e(52,"p",20),n(53,"i",21),r(54," 4 Hours Ago "),i()()()(),n(55,"div",22),e(56,"a",27),r(57,"See All Messages"),i()()(),e(58,"li",28)(59,"a",29),n(60,"img",30),e(61,"span",31),r(62),i()(),e(63,"ul",10)(64,"li",32),n(65,"img",33),e(66,"p"),r(67," Alexander Pierce - Web Developer "),e(68,"small"),r(69,"Member since Nov. 2023"),i()()(),e(70,"li",34)(71,"a",35),n(72,"li",36),r(73,"Perfil"),i(),e(74,"a",37),k("click",function(){return l.logout()}),n(75,"li",38),r(76,"Salir "),i()()()()()()(),e(77,"aside",39)(78,"div",40)(79,"a",41),n(80,"img",42),e(81,"span",43),r(82,"Alcald\xEDa de Cali"),i()()(),e(83,"div",44)(84,"nav",45)(85,"ul",46)(86,"a",47),n(87,"i",48),e(88,"p"),r(89,"Dashboard"),i()(),e(90,"li",5)(91,"a",49),n(92,"i",50),e(93,"p"),r(94,"Por procesar"),i()()(),e(95,"li",5)(96,"a",51),n(97,"i",52),e(98,"p"),r(99,"En proceso"),i()()(),e(100,"li",5)(101,"a",51),n(102,"i",53),e(103,"p"),r(104,"Procesados"),i()()(),e(105,"li",54),v(106,K,5,0,"a",55),e(107,"ul",56)(108,"li",5)(109,"a",57),n(110,"i",58),e(111,"p"),r(112,"Usuarios"),i()()(),e(113,"li",5),v(114,J,4,0,"a",59),i(),e(115,"li",5),v(116,V,4,0,"a",60),i()()()()()()(),e(117,"main",61),n(118,"router-outlet"),i(),e(119,"footer",62)(120,"div",63),r(121,"Anything you want"),i(),e(122,"strong"),r(123," Copyright \xA9 2014-2024\xA0 "),e(124,"a",64),r(125,"AdminLTE.io"),i(),r(126,". "),i(),r(127," All rights reserved. "),i()()()),a&2&&(p(62),I(l.user==null?null:l.user.name),p(44),g("ngIf",l.authService.hasRole("admin")),p(8),g("ngIf",l.authService.hasPermission("permissionsindex")),p(2),g("ngIf",l.authService.hasPermission("roles.index")))},dependencies:[U,S,R],styles:[".menu-open[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   .fa-angle-left[_ngcontent-%COMP%]{transform:rotate(-90deg);transition:transform .3s ease}"]})};var s=class t{constructor(o,a){this.authService=o;this.router=a}canActivate(o){if(!this.authService.getCurrentUser())return this.router.navigate(["/auth/login"]),!1;let l=o.data?.roles,m=this.authService.getUserRoles();return l&&!m.some(O=>l.includes(O))?(this.router.navigate(["/auth/login"]),!1):!0}static \u0275fac=function(a){return new(a||t)(E(d),E(b))};static \u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})};var _=[{path:"",redirectTo:"landing",pathMatch:"full"},{path:"landing",loadComponent:()=>import("./chunk-LXCQB24X.js").then(t=>t.HomeComponent)},{path:"auth",loadComponent:()=>import("./chunk-2LCDAHYK.js").then(t=>t.AuthProfileComponent),children:[{path:"login",loadComponent:()=>import("./chunk-TOE2YBOL.js").then(t=>t.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-DJHK3CLG.js").then(t=>t.RegisterComponent)}]},{path:"",component:A,children:[{path:"dashboard",loadChildren:()=>import("./chunk-46QUPTBG.js").then(t=>t.DashboardModule),canActivate:[s]},{path:"procesar",loadChildren:()=>import("./chunk-MVZZE7XQ.js").then(t=>t.ProcesarModule),canActivate:[s],data:{roles:["admin"]}},{path:"permissions",loadChildren:()=>import("./chunk-47Q6HXUO.js").then(t=>t.PermissionModule),canActivate:[s],data:{roles:["admin"]}},{path:"roles",loadChildren:()=>import("./chunk-ZKMECRLD.js").then(t=>t.RolesModule),canActivate:[s],data:{roles:["admin"]}},{path:"**",redirectTo:"error/404"}]},{path:"**",redirectTo:"landing"}];var M=(t,o)=>{let l=w(d).getToken();console.log("Interceptor - Procesando URL:",t.url),console.log("Interceptor - Token disponible (desde AuthService):",!!l);let m=t.url.includes("/sanctum/csrf-cookie")||t.url.includes("/login");return console.log("Interceptor - \xBFEs URL excluida (CSRF/Login)?:",m),l&&!m?(console.log("Interceptor - **** ADJUNTANDO TOKEN BEARER A ESTA URL: ****",t.url),o(t.clone({setHeaders:{Authorization:`Bearer ${l}`}}))):(console.log("Interceptor - NO se adjunta token a:",t.url),o(t))};var F={providers:[L({eventCoalescing:!0}),N(_),T(j([M]),P({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"}))]};var C=class t{title="multimedia";static \u0275fac=function(a){return new(a||t)};static \u0275cmp=u({type:t,selectors:[["app-root"]],standalone:!0,features:[h],decls:1,vars:0,template:function(a,l){a&1&&n(0,"router-outlet")},dependencies:[S]})};D(C,F).catch(t=>console.error(t));
