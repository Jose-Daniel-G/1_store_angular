import{a as h}from"./chunk-LP3ZXZHP.js";import"./chunk-EK5HOP4N.js";import{a as b,b as l,c as x,d as S,e as _,g as w,h as F,n as C,p as E}from"./chunk-NAB4HAM6.js";import{g as f,p as v}from"./chunk-LM5SF62Y.js";import{Aa as c,Ba as a,Pa as u,Ra as e,Sa as t,Ta as r,Z as d,Za as g,ab as i,eb as p}from"./chunk-TIETC33F.js";var L=class m{constructor(n,o,s){this.fb=n;this.authService=o;this.router=s;this.loginForm=this.fb.group({email:["",[l.required,l.email]],password:["",l.required]})}loginForm;errorMessage="";login(){if(this.errorMessage="",this.loginForm.invalid){this.errorMessage="Por favor, ingresa un email y contrase\xF1a v\xE1lidos.",this.loginForm.markAllAsTouched(),console.warn("LoginComponent: Formulario inv\xE1lido. Detalles:",this.loginForm.errors);return}let n=this.loginForm.value;console.log("LoginComponent: Enviando credenciales al AuthService para login."),this.authService.login(n).subscribe({next:o=>{console.log("LoginComponent: Login exitoso. Usuario autenticado:",o),console.log("LoginComponent: Redireccionando a /dashboard."),this.router.navigate(["/dashboard"])},error:o=>{console.error("LoginComponent: Error en login:",o),o.error&&o.error.message?this.errorMessage=o.error.message:o.status===401?this.errorMessage="Credenciales incorrectas.":o.status===419?this.errorMessage="La sesi\xF3n ha expirado o un problema de seguridad. Por favor, recarga la p\xE1gina e intenta de nuevo.":o.status===500?this.errorMessage="Error interno del servidor. Por favor, intenta de nuevo m\xE1s tarde.":this.errorMessage="Ocurri\xF3 un error inesperado al iniciar sesi\xF3n.",alert(this.errorMessage)}})}static \u0275fac=function(o){return new(o||m)(a(C),a(h),a(v))};static \u0275cmp=d({type:m,selectors:[["app-login"]],standalone:!0,features:[p],decls:55,vars:1,consts:[[1,"container"],[1,"breadcrumbs"],["href","#"],[1,"las","la-home"],["href","#",1,"active"],[1,"register_wrap","section_padding_b"],[1,"row","justify-content-center"],[1,"col-xl-5","col-lg-7","col-md-9"],[1,"register_form","padding_default","shadow_sm"],[1,"title_2"],[1,"mb-4","text_md"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12"],[1,"single_billing_inp"],["type","email","formControlName","email","placeholder","example@mail.com"],["type","password","formControlName","password","placeholder","type password"],[1,"col-12","mt-2","d-flex","justify-content-between","align-items-center"],[1,"custom_check","check_2","d-flex","align-items-center"],["type","checkbox","hidden","","id","save-default",1,"check_inp"],["for","save-default"],["href","forgot-password.html",1,"text-color"],[1,"col-12","mt-3"],["type","submit",1,"default_btn","xs_btn","rounded","px-4","d-block","w-100"],[1,"dif_regway","my-3"],[1,"txt"],[1,"d-flex"],[1,"default_btn","xs_btn","rounded","px-4","d-block","w-50","text-capitalize","bg-facebook"],[1,"fab","fa-facebook-f","me-2"],[1,"default_btn","xs_btn","rounded","px-4","d-block","w-50","ms-3","text-capitalize","bg-google"],[1,"fab","fa-google","me-2"],[1,"text-center","mt-3","mb-0"],["href","register.html",1,"text-color"]],template:function(o,s){o&1&&(e(0,"div",0)(1,"div",1)(2,"a",2),r(3,"i",3),t(),e(4,"a",4),i(5,"Login"),t()()(),e(6,"div",5)(7,"div",0)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h4",9),i(12,"Login"),t(),e(13,"p",10),i(14,"Login if you a a returing customer"),t(),e(15,"form",11),g("ngSubmit",function(){return s.login()}),e(16,"div",12)(17,"div",13)(18,"div",14)(19,"label"),i(20,"Email Address "),e(21,"span"),i(22,"*"),t()(),r(23,"input",15),t()(),e(24,"div",13)(25,"div",14)(26,"label"),i(27,"Password "),e(28,"span"),i(29,"*"),t()(),r(30,"input",16),t()(),e(31,"div",17)(32,"div",18),r(33,"input",19),e(34,"label",20),i(35,"Remember Me"),t()(),e(36,"a",21),i(37,"Forgot Password?"),t()(),e(38,"div",22)(39,"button",23),i(40,"Login"),t()()()(),e(41,"div",24)(42,"span",25),i(43,"Or login in with"),t()(),e(44,"div",26)(45,"button",27),r(46,"i",28),i(47," Facebook "),t(),e(48,"button",29),r(49,"i",30),i(50," Google "),t()(),e(51,"p",31),i(52,"Don't have an account.? "),e(53,"a",32),i(54,"Register Now"),t()()()()()()()),o&2&&(c(15),u("formGroup",s.loginForm))},dependencies:[f,E,_,b,x,S,w,F]})};export{L as LoginComponent};
