import{a as D}from"./chunk-WY3AK3IM.js";import"./chunk-EK5HOP4N.js";import{a as F,b as I,c as E,d as y,e as _,g as N,h as x,n as M,p as H}from"./chunk-NAB4HAM6.js";import{b as B,c as V,d as f,e as q,g as L,n as $,p as S,q as z,s as w}from"./chunk-LM5SF62Y.js";import{Aa as m,Ba as l,Ma as c,Pa as a,Q as g,Ra as o,Sa as r,Ta as u,Z as d,Za as P,_ as b,ab as n,bb as h,gb as C,hb as T,jb as k}from"./chunk-TIETC33F.js";var W=t=>["/permissions",t,"editar"];function X(t,e){if(t&1&&(o(0,"tr")(1,"td"),n(2),r(),o(3,"td"),n(4),r(),o(5,"td"),n(6),T(7,"date"),r(),o(8,"td",7)(9,"a",11),n(10,"Editar"),r(),o(11,"button",12),n(12,"Eliminar"),r()()()),t&2){let i=e.$implicit;m(2),h(i.id),m(2),h(i.name),m(2),h(k(7,4,i.created_at,"dd MMM, y")),m(3),a("routerLink",C(7,W,i.id))}}function Y(t,e){t&1&&(o(0,"tr")(1,"td",13),n(2,"No hay permisos registrados."),r()())}var R=class t{permissions=[];paginatedPermissions=[];errorMessage="";successMessage="";currentPage=1;itemsPerPage=5;totalItems=0;constructor(){}ngOnInit(){this.permissions=Array.from({length:23},(e,i)=>({id:i+1,name:`Permiso ${i+1}`,guard_name:"web",created_at:new Date().toISOString(),updated_at:new Date().toISOString()})),this.totalItems=this.permissions.length,this.updatePaginatedPermissions()}updatePaginatedPermissions(){let e=(this.currentPage-1)*this.itemsPerPage,i=e+this.itemsPerPage;this.paginatedPermissions=this.permissions.slice(e,i)}onPageChange(e){this.currentPage=e,this.updatePaginatedPermissions()}deletePermission(e){confirm("\xBFEst\xE1s seguro de que quieres eliminar este permiso?")&&console.log(`Eliminando permiso con ID: ${e}`)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=d({type:t,selectors:[["app-permissions"]],decls:21,vars:2,consts:[[1,"container-fluid"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"card-body","p-0"],[1,"table","table-hover","mb-0"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],[1,"btn","btn-sm","btn-outline-dark","me-2",3,"routerLink"],[1,"btn","btn-sm","btn-danger"],["colspan","4",1,"text-center"]],template:function(i,s){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),n(4,"Lista de Permisos"),r()(),o(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th"),n(10,"#"),r(),o(11,"th"),n(12,"Nombre"),r(),o(13,"th"),n(14,"Creaci\xF3n"),r(),o(15,"th",7),n(16,"Acci\xF3n"),r()()(),o(17,"tbody"),c(18,X,13,9,"tr",8)(19,Y,3,0,"tr",9),r()()(),u(20,"div",10),r()()),i&2&&(m(18),a("ngForOf",s.paginatedPermissions),m(),a("ngIf",s.paginatedPermissions.length===0))},dependencies:[V,f,z,q]})};var ie=t=>({"is-invalid":t});function te(t,e){t&1&&(o(0,"div",9),n(1," El nombre es obligatorio. "),r())}var j=class t{constructor(e,i,s,p){this.fb=e;this.permissionService=i;this.route=s;this.router=p}permissionForm;permissionId;paginatedPermissions=[];currentPermission;ngOnInit(){this.permissionForm=this.fb.group({name:["",I.required]}),this.route.params.subscribe(e=>{this.permissionId=+e.id,this.permissionId&&this.loadPermission(this.permissionId)}),this.loadAllPermissions()}loadPermission(e){this.permissionService.getById(e).subscribe({next:i=>{this.currentPermission=i,this.permissionForm.patchValue(i)},error:i=>{console.error("Error loading permission:",i)}})}loadAllPermissions(){this.permissionService.getAll().subscribe({next:e=>{this.paginatedPermissions=e},error:e=>{console.error("Error loading all permissions:",e)}})}onSubmit(){this.permissionForm.valid&&this.permissionService.update(this.permissionId,this.permissionForm.value).subscribe({next:e=>{console.log("Permiso actualizado:",e),this.router.navigate(["/permissions"])},error:e=>{console.error("Error al actualizar permiso:",e)}})}deletePermission(e){confirm("\xBFEst\xE1s seguro de que quieres eliminar este permiso?")&&this.permissionService.delete(e).subscribe({next:()=>{console.log("Permiso eliminado:",e),this.paginatedPermissions=this.paginatedPermissions.filter(i=>i.id!==e)},error:i=>{console.error("Error al eliminar permiso:",i)}})}static \u0275fac=function(i){return new(i||t)(l(M),l(D),l($),l(S))};static \u0275cmp=d({type:t,selectors:[["app-edit"]],decls:11,vars:6,consts:[[1,"container-fluid"],[1,"card"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Ingresa el nombre",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"]],template:function(i,s){if(i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),P("ngSubmit",function(){return s.onSubmit()}),o(4,"div",4)(5,"label",5),n(6,"Nombre"),r(),u(7,"input",6),c(8,te,2,0,"div",7),r(),o(9,"button",8),n(10,"Enviar"),r()()()()()),i&2){let p,v;m(3),a("formGroup",s.permissionForm),m(4),a("ngClass",C(4,ie,((p=s.permissionForm.get("name"))==null?null:p.invalid)&&((p=s.permissionForm.get("name"))==null?null:p.touched))),m(),a("ngIf",((v=s.permissionForm.get("name"))==null?null:v.invalid)&&((v=s.permissionForm.get("name"))==null?null:v.touched)),m(),a("disabled",s.permissionForm.invalid)}},dependencies:[B,f,_,F,E,y,N,x]})};function re(t,e){t&1&&(o(0,"div",9),n(1," El nombre es obligatorio. "),r())}var G=class t{constructor(e,i,s){this.fb=e;this.permissionService=i;this.router=s}permissionForm;ngOnInit(){this.permissionForm=this.fb.group({name:["",I.required]})}onSubmit(){this.permissionForm.valid&&this.permissionService.create(this.permissionForm.value).subscribe({next:e=>{console.log("Permiso creado:",e),this.router.navigate(["/permissions"])},error:e=>{console.error("Error al crear permiso:",e)}})}static \u0275fac=function(i){return new(i||t)(l(M),l(D),l(S))};static \u0275cmp=d({type:t,selectors:[["app-permission-create"]],decls:11,vars:3,consts:[[1,"container-fluid"],[1,"card"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Ingresa el nombre",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"]],template:function(i,s){if(i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),P("ngSubmit",function(){return s.onSubmit()}),o(4,"div",4)(5,"label",5),n(6,"Nombre"),r(),u(7,"input",6),c(8,re,2,0,"div",7),r(),o(9,"button",8),n(10,"Enviar"),r()()()()()),i&2){let p;m(3),a("formGroup",s.permissionForm),m(5),a("ngIf",((p=s.permissionForm.get("name"))==null?null:p.invalid)&&((p=s.permissionForm.get("name"))==null?null:p.touched)),m(),a("disabled",s.permissionForm.invalid)}},dependencies:[f,_,F,E,y,N,x]})};var oe=[{path:"",component:R},{path:"create",component:G},{path:":id/editar",component:j}],A=class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=b({type:t});static \u0275inj=g({imports:[w.forChild(oe),w]})};var U=class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=b({type:t});static \u0275inj=g({imports:[L,A,H]})};export{U as PermissionModule};
